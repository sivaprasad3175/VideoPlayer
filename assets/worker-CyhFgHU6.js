(function(){let e=`https://unpkg.com/@ffmpeg/core@0.12.9/dist/umd/ffmpeg-core.js`;var t;(function(e){e.LOAD=`LOAD`,e.EXEC=`EXEC`,e.FFPROBE=`FFPROBE`,e.WRITE_FILE=`WRITE_FILE`,e.READ_FILE=`READ_FILE`,e.DELETE_FILE=`DELETE_FILE`,e.RENAME=`RENAME`,e.CREATE_DIR=`CREATE_DIR`,e.LIST_DIR=`LIST_DIR`,e.DELETE_DIR=`DELETE_DIR`,e.ERROR=`ERROR`,e.DOWNLOAD=`DOWNLOAD`,e.PROGRESS=`PROGRESS`,e.LOG=`LOG`,e.MOUNT=`MOUNT`,e.UNMOUNT=`UNMOUNT`})(t||={});let n=Error(`unknown message type`),r=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),i=Error(`failed to import ffmpeg-core.js`),a,o=async({coreURL:n,wasmURL:r,workerURL:o})=>{let s=!a;try{n||=e,importScripts(n)}catch{if((!n||n===e)&&(n=e.replace(`/umd/`,`/esm/`)),self.createFFmpegCore=(await import(n)).default,!self.createFFmpegCore)throw i}let c=n,l=r||n.replace(/.js$/g,`.wasm`),u=o||n.replace(/.js$/g,`.worker.js`);return a=await self.createFFmpegCore({mainScriptUrlOrBlob:`${c}#${btoa(JSON.stringify({wasmURL:l,workerURL:u}))}`}),a.setLogger(e=>self.postMessage({type:t.LOG,data:e})),a.setProgress(e=>self.postMessage({type:t.PROGRESS,data:e})),s},s=({args:e,timeout:t=-1})=>{a.setTimeout(t),a.exec(...e);let n=a.ret;return a.reset(),n},c=({args:e,timeout:t=-1})=>{a.setTimeout(t),a.ffprobe(...e);let n=a.ret;return a.reset(),n},l=({path:e,data:t})=>(a.FS.writeFile(e,t),!0),u=({path:e,encoding:t})=>a.FS.readFile(e,{encoding:t}),d=({path:e})=>(a.FS.unlink(e),!0),f=({oldPath:e,newPath:t})=>(a.FS.rename(e,t),!0),p=({path:e})=>(a.FS.mkdir(e),!0),m=({path:e})=>{let t=a.FS.readdir(e),n=[];for(let r of t){let t=a.FS.stat(`${e}/${r}`),i=a.FS.isDir(t.mode);n.push({name:r,isDir:i})}return n},h=({path:e})=>(a.FS.rmdir(e),!0),g=({fsType:e,options:t,mountPoint:n})=>{let r=e,i=a.FS.filesystems[r];return i?(a.FS.mount(i,t,n),!0):!1},_=({mountPoint:e})=>(a.FS.unmount(e),!0);self.onmessage=async({data:{id:e,type:i,data:v}})=>{let y=[],b;try{if(i!==t.LOAD&&!a)throw r;switch(i){case t.LOAD:b=await o(v);break;case t.EXEC:b=s(v);break;case t.FFPROBE:b=c(v);break;case t.WRITE_FILE:b=l(v);break;case t.READ_FILE:b=u(v);break;case t.DELETE_FILE:b=d(v);break;case t.RENAME:b=f(v);break;case t.CREATE_DIR:b=p(v);break;case t.LIST_DIR:b=m(v);break;case t.DELETE_DIR:b=h(v);break;case t.MOUNT:b=g(v);break;case t.UNMOUNT:b=_(v);break;default:throw n}}catch(n){self.postMessage({id:e,type:t.ERROR,data:n.toString()});return}b instanceof Uint8Array&&y.push(b.buffer),self.postMessage({id:e,type:i,data:b},y)}})();